C51 COMPILER V9.60.0.0   MAIN                                                              10/17/2024 19:12:21 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.ls
                    -t) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "LCD1602.h"
   4          #include "Timer0.h"
   5          void K1INT0(void);
   6          void K2INT1(void);
   7          
   8          
   9          unsigned char Sec=55,Min=29,Hour=02;
  10          bit counting = 0;
  11          sbit beep=P1^0;
  12          int tap_count = 0;
  13          
  14          void main()
  15          {
  16   1        LCD_Init();
  17   1        Timer0Init();
  18   1        
  19   1        
  20   1        K1INT0();
  21   1        K2INT1();
  22   1        
  23   1        LCD_ShowString(1,1,"Clock:"); 
  24   1        LCD_ShowString(2,1,"  :  :");
  25   1        
  26   1        while(1)
  27   1        {
  28   2          LCD_ShowNum(2,1,Hour,2);  
  29   2          LCD_ShowNum(2,4,Min,2);
  30   2          LCD_ShowNum(2,7,Sec,2);
  31   2          LCD_ShowNum(2,15,tap_count,2);
  32   2        }
  33   1      }
  34          
  35          void Timer0_Routine() interrupt 1
  36          {
  37   1        static unsigned int T0Count;
  38   1        TL0 = 0x18;   
  39   1        TH0 = 0xFC;   
  40   1        T0Count++;
  41   1        if(T0Count>=1000) 
  42   1        {
  43   2          T0Count=0;
  44   2          if(counting==1)
  45   2          { 
  46   3          Sec++;
  47   3          }     
  48   2          if(Sec>=60)
  49   2          {
  50   3            beep=0;
  51   3            Delay(200);
  52   3            beep=1;
  53   3            Sec=0;    
  54   3            Min++;
C51 COMPILER V9.60.0.0   MAIN                                                              10/17/2024 19:12:21 PAGE 2   

  55   3            if(Min>=60)
  56   3            {
  57   4              Min=0;  
  58   4              Hour++;
  59   4              if(Hour>=24)
  60   4              {
  61   5                Hour=0;
  62   5              }
  63   4            }
  64   3          }
  65   2        }
  66   1      }
  67          
  68          void K1INT0(void)
  69          {
  70   1          IT0 = 1;       
  71   1          EX0 = 1;       
  72   1      }
  73          
  74          void K2INT1(void)
  75          {
  76   1          IT1 = 1;       
  77   1          EX1 = 1;      
  78   1      }
  79          
  80          void Int0_ISR() interrupt 0
  81          {
  82   1          tap_count += 1;
  83   1          Delay(20);  
  84   1          if (P3_2 == 0)  
  85   1          {
  86   2              counting = 1;  
  87   2          }
  88   1      }
  89          
  90          
  91          void Int1_ISR() interrupt 2
  92          {
  93   1          Delay(20);  
  94   1          if (P3_3 == 0)  
  95   1          {
  96   2              counting = 0;  
  97   2          }
  98   1      }
  99          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    399    ----
   CONSTANT SIZE    =     14    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
